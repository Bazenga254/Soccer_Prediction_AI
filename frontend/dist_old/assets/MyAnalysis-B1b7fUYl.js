import{r as h,u as N,c as j,j as s,L as v}from"./index-B3SC9TNl.js";function u(a){return a?new Date(a).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}function b({session:a,isExpanded:l,onToggle:t}){return s.jsxs("div",{className:`my-analysis-card ${l?"expanded":""}`,children:[s.jsxs("div",{className:"my-analysis-card-header",onClick:t,children:[s.jsxs("div",{className:"my-analysis-card-info",children:[s.jsx("div",{className:"my-analysis-card-date",children:u(a.created_at)}),s.jsxs("div",{className:"my-analysis-card-meta",children:[s.jsx("span",{className:`my-analysis-status ${a.status}`,children:a.status}),s.jsxs("span",{className:"my-analysis-match-count",children:[a.total_matches," matches"]})]})]}),s.jsx("div",{className:"my-analysis-card-teams",children:(a.match_summaries||[]).map((c,i)=>s.jsx("span",{className:"my-analysis-team-pill",children:c},i))}),s.jsx("span",{className:"my-analysis-card-arrow",children:l?"â–²":"â–¼"})]}),l&&a.results&&a.results.length>0&&s.jsxs("div",{className:"my-analysis-card-body",children:[a.best_combination&&s.jsxs("div",{className:"my-analysis-combinations",children:[s.jsxs("h4",{children:["ðŸŽ¯"," Winning Combinations"]}),s.jsx("div",{className:"my-analysis-combo-grid",children:Object.entries(a.best_combination).map(([c,i])=>s.jsxs("div",{className:`my-analysis-combo-card ${c}`,children:[s.jsx("div",{className:"my-analysis-combo-name",children:i.name}),s.jsx("div",{className:"my-analysis-combo-desc",children:i.description}),s.jsx("div",{className:"my-analysis-combo-picks",children:(i.picks||[]).map((n,r)=>s.jsxs("div",{className:"my-analysis-combo-pick",children:[s.jsx("span",{className:"pick-match",children:n.match}),s.jsx("span",{className:"pick-value",children:n.pick}),s.jsxs("span",{className:"pick-prob",children:[n.probability?.toFixed(1),"%"]})]},r))}),s.jsxs("div",{className:"my-analysis-combo-total",children:["Combined: ",i.combined_probability?.toFixed(2),"%"]})]},c))})]}),s.jsxs("h4",{children:["âš½"," Match Analysis Results"]}),a.results.map((c,i)=>s.jsx(g,{result:c,index:i},i))]})]})}function g({result:a,index:l}){const[t,c]=h.useState(!1);if(a.status==="failed")return s.jsxs("div",{className:"my-analysis-match failed",children:[s.jsxs("span",{children:["#",l+1]}),s.jsxs("span",{children:[a.home_team?.name||"?"," vs ",a.away_team?.name||"?"]}),s.jsx("span",{className:"my-analysis-status failed",children:"Failed"})]});const i=a.predictions||{},n=i["1x2"]||{},r=i.double_chance||{},d=a.goals_analysis,o=a.factors||{};return s.jsxs("div",{className:`my-analysis-match ${t?"expanded":""}`,children:[s.jsxs("div",{className:"my-analysis-match-header",onClick:()=>c(!t),children:[s.jsxs("span",{className:"my-analysis-match-num",children:["#",l+1]}),s.jsxs("div",{className:"my-analysis-match-teams",children:[a.home_team?.crest&&s.jsx("img",{src:a.home_team.crest,alt:"",className:"my-analysis-crest"}),s.jsx("span",{children:a.home_team?.name}),s.jsx("span",{className:"my-analysis-vs",children:"vs"}),a.away_team?.crest&&s.jsx("img",{src:a.away_team.crest,alt:"",className:"my-analysis-crest"}),s.jsx("span",{children:a.away_team?.name})]}),s.jsxs("div",{className:"my-analysis-match-pick",children:[s.jsx("span",{className:"pick-badge",children:n.recommended_label||n.recommended}),s.jsx("span",{className:"pick-conf",children:n.confidence})]}),s.jsx("span",{className:"my-analysis-match-arrow",children:t?"â–²":"â–¼"})]}),t&&s.jsxs("div",{className:"my-analysis-match-detail",children:[s.jsxs("div",{className:"my-analysis-section",children:[s.jsx("h5",{children:"1X2 Predictions"}),s.jsxs("div",{className:"my-analysis-probs",children:[s.jsxs("div",{className:"prob-item",children:[s.jsx("span",{children:"Home"}),s.jsxs("span",{children:[n.home_win?.toFixed(1),"%"]})]}),s.jsxs("div",{className:"prob-item",children:[s.jsx("span",{children:"Draw"}),s.jsxs("span",{children:[n.draw?.toFixed(1),"%"]})]}),s.jsxs("div",{className:"prob-item",children:[s.jsx("span",{children:"Away"}),s.jsxs("span",{children:[n.away_win?.toFixed(1),"%"]})]})]})]}),r&&s.jsxs("div",{className:"my-analysis-section",children:[s.jsx("h5",{children:"Double Chance"}),s.jsxs("div",{className:"my-analysis-probs",children:[s.jsxs("div",{className:"prob-item",children:[s.jsx("span",{children:"1X"}),s.jsxs("span",{children:[r["1X"]?.toFixed(1),"%"]})]}),s.jsxs("div",{className:"prob-item",children:[s.jsx("span",{children:"X2"}),s.jsxs("span",{children:[r.X2?.toFixed(1),"%"]})]}),s.jsxs("div",{className:"prob-item",children:[s.jsx("span",{children:"12"}),s.jsxs("span",{children:[r[12]?.toFixed(1),"%"]})]})]})]}),d&&s.jsxs("div",{className:"my-analysis-section",children:[s.jsx("h5",{children:"Goals Analysis"}),s.jsxs("div",{className:"my-analysis-probs",children:[s.jsxs("div",{className:"prob-item",children:[s.jsx("span",{children:"Avg Goals"}),s.jsx("span",{children:d.avg_total_goals})]}),s.jsxs("div",{className:"prob-item",children:[s.jsx("span",{children:"Predicted"}),s.jsx("span",{children:d.scoring_prediction?.predicted_score})]}),s.jsxs("div",{className:"prob-item",children:[s.jsx("span",{children:"BTTS"}),s.jsxs("span",{children:[d.btts?.prediction," (",d.btts?.yes_percentage,"%)"]})]})]}),d.over_under&&s.jsx("div",{className:"my-analysis-probs",style:{marginTop:"6px"},children:Object.entries(d.over_under).map(([m,e])=>s.jsxs("div",{className:"prob-item",children:[s.jsx("span",{children:m.replace("_"," ").toUpperCase()}),s.jsxs("span",{children:[e.prediction," (",e.percentage,"%)"]})]},m))})]}),a.key_factors&&a.key_factors.length>0&&s.jsxs("div",{className:"my-analysis-section",children:[s.jsx("h5",{children:"Key Factors"}),s.jsx("ul",{className:"my-analysis-factors",children:a.key_factors.map((m,e)=>s.jsx("li",{children:m},e))})]}),o.injury_impact&&s.jsxs("div",{className:"my-analysis-section",children:[s.jsx("h5",{children:"Injury Impact"}),s.jsx("p",{className:"my-analysis-verdict",children:o.injury_impact.verdict})]}),s.jsxs("div",{className:"my-analysis-data-source",children:["Data: ",s.jsx("span",{className:`source-badge ${a.data_source}`,children:a.data_source?.toUpperCase()})]})]})]})}function f(){const[a,l]=h.useState([]),[t,c]=h.useState(!0),[i,n]=h.useState(null),[r,d]=h.useState(null),{t:o}=N();h.useEffect(()=>{j.get("/api/jackpot/history").then(e=>{l(e.data.sessions||[]),c(!1)}).catch(()=>c(!1))},[]);const m=async e=>{if(i===e.id){n(null);return}if(e.results&&e.results.length>0){n(e.id);return}d(e.id);try{const y=await j.get(`/api/jackpot/session/${e.id}`);l(p=>p.map(x=>x.id===e.id?{...x,results:y.data.results||[],best_combination:y.data.best_combination}:x)),n(e.id)}catch{}d(null)};return t?s.jsx("div",{className:"my-analysis-page",children:s.jsxs("div",{className:"loading-container",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"Loading your analyses..."})]})}):s.jsxs("div",{className:"my-analysis-page",children:[s.jsxs("div",{className:"my-analysis-header",children:[s.jsxs("h2",{children:["ðŸ“Š"," ",o("myAnalysis.title")]}),s.jsx("p",{className:"my-analysis-subtitle",children:"Your saved jackpot analysis reports"})]}),a.length>0&&s.jsxs("div",{className:"ma-stats-row",children:[s.jsxs("div",{className:"ma-stat-card",children:[s.jsx("span",{className:"ma-stat-value",children:a.length}),s.jsx("span",{className:"ma-stat-label",children:"Reports"})]}),s.jsxs("div",{className:"ma-stat-card",children:[s.jsx("span",{className:"ma-stat-value",children:a.reduce((e,y)=>e+(y.total_matches||0),0)}),s.jsx("span",{className:"ma-stat-label",children:"Matches"})]}),s.jsxs("div",{className:"ma-stat-card",children:[s.jsxs("span",{className:"ma-stat-value",children:[a.filter(e=>e.status==="completed").length,"/",a.length]}),s.jsx("span",{className:"ma-stat-label",children:"Completed"})]})]}),a.length===0?s.jsxs("div",{className:"my-analysis-empty",children:[s.jsx("div",{className:"my-analysis-empty-icon",children:"ðŸ“‹"}),s.jsx("h3",{children:o("myAnalysis.noAnalysis")}),s.jsxs(v,{to:"/jackpot",className:"my-analysis-cta",children:["ðŸŽ¯"," Start Analyzing"]})]}):s.jsx("div",{className:"my-analysis-list",children:a.map(e=>s.jsx(b,{session:e,isExpanded:i===e.id,onToggle:()=>m(e)},e.id))})]})}export{f as default};
