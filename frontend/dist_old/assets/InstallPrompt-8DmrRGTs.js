import{r,j as e}from"./index-B3SC9TNl.js";let n=null;function m(){const[d,o]=r.useState(!1),[a,c]=r.useState(!1);r.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const s=localStorage.getItem("spark_pwa_dismissed");if(s&&Date.now()-parseInt(s,10)<6048e5)return;const i=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;if(c(i),i){const t=setTimeout(()=>o(!0),3e4);return()=>clearTimeout(t)}const l=t=>{t.preventDefault(),n=t,setTimeout(()=>o(!0),3e4)};return window.addEventListener("beforeinstallprompt",l),()=>window.removeEventListener("beforeinstallprompt",l)},[]);const p=async()=>{if(!n)return;n.prompt();const{outcome:s}=await n.userChoice;s==="accepted"&&o(!1),n=null},u=()=>{o(!1),localStorage.setItem("spark_pwa_dismissed",String(Date.now()))};return d?e.jsxs("div",{style:{position:"fixed",bottom:80,left:16,right:16,zIndex:9999,background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",border:"1px solid #334155",borderRadius:12,padding:"16px 20px",display:"flex",alignItems:"center",gap:16,boxShadow:"0 8px 32px rgba(0,0,0,0.4)",maxWidth:480,margin:"0 auto"},children:[e.jsx("img",{src:"/pwa-192x192.png",alt:"Spark AI",style:{width:48,height:48,borderRadius:10}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,fontSize:15,color:"#f8fafc",marginBottom:4,fontFamily:"'Plus Jakarta Sans', sans-serif"},children:"Install Spark AI"}),e.jsx("div",{style:{fontSize:13,color:"#94a3b8",lineHeight:1.4},children:a?'Tap the Share button, then "Add to Home Screen"':"Get quick access from your home screen"})]}),!a&&e.jsx("button",{onClick:p,style:{padding:"8px 20px",background:"#22c55e",color:"#0f172a",fontWeight:600,fontSize:14,border:"none",borderRadius:8,cursor:"pointer",whiteSpace:"nowrap"},children:"Install"}),e.jsx("button",{onClick:u,style:{background:"none",border:"none",color:"#64748b",fontSize:20,cursor:"pointer",padding:4,lineHeight:1},"aria-label":"Dismiss",children:"âœ•"})]}):null}export{m as default};
