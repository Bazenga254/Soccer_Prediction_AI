import{u as A,d as P,r as t,b as S,c as C,j as e}from"./index-B3SC9TNl.js";const v={PL:"Premier League",PD:"La Liga",BL1:"Bundesliga",SA:"Serie A",FL1:"Ligue 1",ELC:"Championship",DED:"Eredivisie",PPL:"Primeira Liga",SPL:"Scottish Premiership",BPL:"Belgian Pro League",TSL:"Turkish Super Lig",SSL:"Swiss Super League",ABL:"Austrian Bundesliga",GSL:"Greek Super League",DSL:"Danish Superliga",SWA:"Swedish Allsvenskan",NOE:"Norwegian Eliteserien",CFL:"Czech First League",EPL:"Polish Ekstraklasa",HNL:"Croatian HNL",SRS:"Serbian Super Liga",ROL:"Romanian Liga I",UPL:"Ukrainian Premier League",RPL:"Russian Premier League",BSA:"Brazilian Serie A",ALP:"Argentine Liga Profesional",COL:"Colombian Primera A",CHL:"Chilean Primera Division",URU:"Uruguayan Primera Division",PAR:"Paraguayan Division",PER:"Peruvian Liga 1",ECU:"Ecuadorian Serie A",MLS:"MLS",LMX:"Liga MX",EGY:"Egyptian Premier League",ZAF:"South African Premier League",MAR:"Moroccan Botola Pro",ALG:"Algerian Ligue 1",TUN:"Tunisian Ligue 1",NGA:"Nigerian NPFL",KEN:"Kenyan Premier League",GHA:"Ghanaian Premier League",JPN:"J-League",KOR:"K-League",SAU:"Saudi Pro League",CHN:"Chinese Super League",IND:"Indian Super League",AUS:"A-League",THA:"Thai League 1",UAE:"UAE Pro League",CL:"Champions League",EL:"Europa League",ECL:"Conference League",CLI:"Copa Libertadores",CAF:"CAF Champions League",AFC:"AFC Champions League",EC:"Euro Championship",WC:"World Cup",CA:"Copa America",ACN:"Africa Cup of Nations"};function E(a){const s=new Date(a),r={weekday:"short",month:"short",day:"numeric"};return s.toLocaleDateString("en-GB",r)}function y(a){return new Date(a).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}function T(a){const s={};return a.forEach(r=>{const n=r.date.split("T")[0];s[n]||(s[n]=[]),s[n].push(r)}),s}function w({fixture:a,onAnalyze:s}){return e.jsx("div",{className:"fixture-card clickable",onClick:s,children:e.jsxs("div",{className:"fixture-card-header",children:[e.jsx("div",{className:"fixture-time",children:y(a.date)}),e.jsxs("div",{className:"fixture-teams-row",children:[e.jsxs("div",{className:"fixture-team home",children:[a.home_team.crest&&e.jsx("img",{src:a.home_team.crest,alt:"",className:"team-crest"}),e.jsx("span",{className:"team-name",children:a.home_team.name})]}),e.jsx("div",{className:"fixture-vs",children:"vs"}),e.jsxs("div",{className:"fixture-team away",children:[e.jsx("span",{className:"team-name",children:a.away_team.name}),a.away_team.crest&&e.jsx("img",{src:a.away_team.crest,alt:"",className:"team-crest"})]})]}),e.jsxs("div",{className:"fixture-analyze-btn",children:[e.jsx("span",{children:"View Analysis"}),e.jsx("span",{className:"arrow",children:"â†’"})]})]})})}function b({competition:a}){const{t:s}=A(),{competitionId:r}=P(),n=r||a||"PL",L=v[n]||"Unknown League",[u,g]=t.useState([]),[x,c]=t.useState(!0),[m,d]=t.useState(null),[h,p]=t.useState(!1),N=S();t.useEffect(()=>{c(!0),d(null),C.get(`/api/fixtures?days=14&competition=${n}`).then(i=>{g(i.data.fixtures||[]),p(i.data.is_historical||!1),c(!1)}).catch(()=>{d("Failed to load fixtures. Make sure the backend is running on port 8000."),c(!1)})},[n]);const j=i=>{N(`/match/${n}/${i.home_team.id}/${i.away_team.id}`,{state:{fixture:i,competition:n}})};if(x)return e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:s("common.loading")})]});if(m)return e.jsx("div",{className:"error-banner",children:m});const o=T(u),f=Object.keys(o).sort();return e.jsxs("div",{className:"fixtures-container",children:[e.jsxs("div",{className:"fixtures-header",children:[e.jsxs("h2",{children:[h?"Recent":s("fixtures.upcoming")," ",L," Fixtures"]}),e.jsx("p",{className:"fixtures-subtitle",children:"Click on a match to see H2H analysis and predictions"}),h&&e.jsx("div",{className:"historical-notice",children:"âš ï¸ Showing recent matches from 2024-25 season (free API tier limitation)"})]}),u.length===0?e.jsxs("div",{className:"no-fixtures",children:[e.jsx("div",{className:"no-fixtures-icon",children:"ðŸ“…"}),e.jsx("h3",{children:s("fixtures.noFixtures")}),e.jsx("p",{children:"There are no scheduled matches in the next 14 days."}),e.jsxs("div",{className:"no-fixtures-reasons",children:[e.jsx("p",{className:"hint",children:"Possible reasons:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"The league is currently in off-season"}),e.jsx("li",{children:"International break or cup competitions"}),e.jsx("li",{children:"The tournament hasn't started yet"})]})]}),e.jsx("p",{className:"hint",children:"Try selecting another competition from the navigation bar above."})]}):e.jsx("div",{className:"fixtures-list",children:f.map(i=>e.jsxs("div",{className:"fixture-day",children:[e.jsxs("div",{className:"fixture-date-header",children:[e.jsx("span",{className:"date-label",children:E(i+"T00:00:00")}),e.jsxs("span",{className:"match-count",children:[o[i].length," matches"]})]}),e.jsx("div",{className:"fixture-day-matches",children:o[i].map(l=>e.jsx(w,{fixture:l,onAnalyze:()=>j(l)},l.id))})]},i))})]})}export{b as default};
