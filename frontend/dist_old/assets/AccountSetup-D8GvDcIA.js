import{u as Q,a as N,r as a,j as e,c as w}from"./index-B3SC9TNl.js";import{C}from"./CountryPicker-UwHd2W_3.js";function k(){const{t}=Q(),{user:n,refreshProfile:j}=N(),[u,v]=a.useState(""),[r,f]=a.useState(""),[i,y]=a.useState(n?.date_of_birth||""),[d,S]=a.useState(n?.country||""),[o,h]=a.useState(!1),[p,x]=a.useState(""),m=u&&r.trim().length>=2&&i,g=async s=>{if(s.preventDefault(),!!m){x(""),h(!0);try{const c={security_question:u,security_answer:r.trim(),date_of_birth:i,country:d||void 0};n?.full_name||(c.full_name=n?.display_name||""),await w.put("/api/user/personal-info",c),await j()}catch(c){x(c.response?.data?.detail||"Failed to save. Please try again.")}finally{h(!1)}}},l=new Date,b=new Date(l.getFullYear()-13,l.getMonth(),l.getDate()).toISOString().split("T")[0];return e.jsx("div",{className:"account-setup-overlay",children:e.jsxs("div",{className:"account-setup-card",children:[e.jsx("div",{className:"account-setup-icon",children:e.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 9v4m0 4h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"})})}),e.jsx("h2",{className:"account-setup-title",children:t("accountSetup.title")}),e.jsx("p",{className:"account-setup-subtitle",children:t("accountSetup.subtitle")}),e.jsxs("form",{onSubmit:g,className:"account-setup-form",children:[e.jsxs("div",{className:"account-setup-field",children:[e.jsx("label",{children:t("accountSetup.dateOfBirth")}),e.jsx("input",{type:"date",value:i,onChange:s=>y(s.target.value),max:b,required:!0})]}),e.jsxs("div",{className:"account-setup-field",children:[e.jsx("label",{children:"Country"}),e.jsx(C,{value:d,onChange:S,disabled:o,placeholder:"Search for your country"})]}),e.jsxs("div",{className:"account-setup-field",children:[e.jsx("label",{children:t("accountSetup.securityQuestion")}),e.jsxs("select",{value:u,onChange:s=>v(s.target.value),required:!0,children:[e.jsx("option",{value:"",children:t("accountSetup.selectQuestion")}),e.jsx("option",{value:t("auth.secQ1"),children:t("auth.secQ1")}),e.jsx("option",{value:t("auth.secQ2"),children:t("auth.secQ2")}),e.jsx("option",{value:t("auth.secQ3"),children:t("auth.secQ3")}),e.jsx("option",{value:t("auth.secQ4"),children:t("auth.secQ4")}),e.jsx("option",{value:t("auth.secQ5"),children:t("auth.secQ5")}),e.jsx("option",{value:t("auth.secQ6"),children:t("auth.secQ6")})]})]}),e.jsxs("div",{className:"account-setup-field",children:[e.jsx("label",{children:t("accountSetup.securityAnswer")}),e.jsx("input",{type:"text",value:r,onChange:s=>f(s.target.value),placeholder:t("accountSetup.answerPlaceholder"),required:!0,minLength:2}),e.jsx("span",{className:"account-setup-hint",children:t("accountSetup.answerHint")})]}),p&&e.jsx("div",{className:"account-setup-error",children:p}),e.jsx("button",{type:"submit",className:"account-setup-btn",disabled:!m||o,children:t(o?"common.saving":"accountSetup.saveContinue")})]})]})})}export{k as default};
