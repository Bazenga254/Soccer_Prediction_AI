import{u as R,b as q,k as T,r as n,j as s,c as z}from"./index-B3SC9TNl.js";import{i as $,s as D}from"./sounds-Ck9TXWp9.js";const O=[{id:"dark",colors:["#0f172a","#1e293b","#6c5ce7"]},{id:"midnight",colors:["#0a1628","#0f1f3a","#3b82f6"]},{id:"light",colors:["#f8fafc","#ffffff","#6c5ce7"]}];function F(){const{t:e}=R(),b=q(),{theme:g,setTheme:C}=T(),[u,P]=n.useState($()),[l,m]=n.useState(""),[i,w]=n.useState(""),[j,p]=n.useState(""),[c,S]=n.useState(!1),[d,M]=n.useState(!1),[h,A]=n.useState(!1),[f,v]=n.useState(!1),[y,r]=n.useState(""),[N,k]=n.useState(""),B=()=>{const t=!u;P(t),D(t)},o=n.useMemo(()=>[{label:e("auth.pwdReq1","At least 8 characters"),met:i.length>=8},{label:e("auth.pwdReq2","At least 2 uppercase letters"),met:(i.match(/[A-Z]/g)||[]).length>=2},{label:e("auth.pwdReq3","At least 2 lowercase letters"),met:(i.match(/[a-z]/g)||[]).length>=2},{label:e("auth.pwdReq4","At least 2 numbers"),met:(i.match(/[0-9]/g)||[]).length>=2},{label:e("auth.pwdReq5","At least 2 special characters"),met:(i.match(/[^A-Za-z0-9]/g)||[]).length>=2}],[i,e]),x=o.filter(t=>t.met).length/o.length*100,W=x<=40?"#ef4444":x<=80?"#f59e0b":"#22c55e",L=async t=>{if(t.preventDefault(),r(""),k(""),!l.trim()){r(e("settings.enterCurrentPassword","Please enter your current password"));return}if(!o.every(a=>a.met)){r(e("resetPassword.meetRequirements","Please meet all password requirements"));return}if(i!==j){r(e("resetPassword.passwordsNoMatch","Passwords do not match"));return}v(!0);try{(await z.post("/api/user/change-password",{current_password:l,new_password:i})).data.success&&(k(e("settings.passwordChanged","Password changed successfully!")),m(""),w(""),p(""))}catch(a){r(a.response?.data?.detail||e("auth.somethingWrong","Something went wrong"))}v(!1)};return s.jsxs("div",{className:"settings-page",children:[s.jsxs("button",{className:"back-btn",onClick:()=>b(-1),children:["← ",e("settings.back","Back")]}),s.jsx("h1",{className:"settings-title",children:e("settings.title","Settings")}),s.jsxs("div",{className:"settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),s.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"}),s.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"})]}),s.jsx("h2",{children:e("settings.sound","Sound")})]}),s.jsxs("div",{className:"settings-row",children:[s.jsxs("div",{className:"settings-row-info",children:[s.jsx("span",{className:"settings-row-label",children:e("settings.notificationSounds","Notification Sounds")}),s.jsx("span",{className:"settings-row-desc",children:e("settings.soundDescription","Goal whistles, message alerts, and notification sounds")})]}),s.jsx("button",{className:`settings-toggle ${u?"on":""}`,onClick:B,children:s.jsx("span",{className:"settings-toggle-knob"})})]})]}),s.jsxs("div",{className:"settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),s.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),s.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),s.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),s.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),s.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),s.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),s.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),s.jsx("h2",{children:e("settings.theme","Theme")})]}),s.jsx("p",{className:"settings-section-desc",children:e("settings.themeDescription","Choose your preferred appearance")}),s.jsx("div",{className:"settings-theme-grid",children:O.map(t=>s.jsxs("button",{className:`settings-theme-card ${g===t.id?"active":""}`,onClick:()=>C(t.id),children:[s.jsx("div",{className:"theme-preview",children:t.colors.map((a,E)=>s.jsx("span",{className:"theme-dot",style:{background:a}},E))}),s.jsx("span",{className:"theme-label",children:e(`settings.${t.id}`,t.id)}),g===t.id&&s.jsx("svg",{className:"theme-check",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})]},t.id))})]}),s.jsxs("div",{className:"settings-section",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),s.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),s.jsx("h2",{children:e("settings.changePassword","Change Password")})]}),s.jsxs("form",{className:"settings-password-form",onSubmit:L,children:[y&&s.jsx("div",{className:"settings-error",children:y}),N&&s.jsx("div",{className:"settings-success",children:N}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{children:e("settings.currentPassword","Current Password")}),s.jsxs("div",{className:"settings-input-wrap",children:[s.jsx("input",{type:c?"text":"password",value:l,onChange:t=>m(t.target.value),placeholder:"••••••••"}),s.jsx("button",{type:"button",className:"settings-eye",onClick:()=>S(!c),children:c?s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),s.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{children:e("settings.newPassword","New Password")}),s.jsxs("div",{className:"settings-input-wrap",children:[s.jsx("input",{type:d?"text":"password",value:i,onChange:t=>w(t.target.value),placeholder:"••••••••"}),s.jsx("button",{type:"button",className:"settings-eye",onClick:()=>M(!d),children:d?s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),s.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),i&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"settings-strength-bar",children:s.jsx("div",{className:"settings-strength-fill",style:{width:`${x}%`,background:W}})}),s.jsx("ul",{className:"settings-reqs",children:o.map((t,a)=>s.jsxs("li",{className:t.met?"met":"",children:[t.met?"✓":"✗"," ",t.label]},a))})]})]}),s.jsxs("div",{className:"settings-field",children:[s.jsx("label",{children:e("settings.confirmPassword","Confirm Password")}),s.jsxs("div",{className:"settings-input-wrap",children:[s.jsx("input",{type:h?"text":"password",value:j,onChange:t=>p(t.target.value),placeholder:"••••••••"}),s.jsx("button",{type:"button",className:"settings-eye",onClick:()=>A(!h),children:h?s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),s.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),s.jsx("button",{type:"submit",className:"settings-submit",disabled:f,children:f?e("settings.updating","Updating..."):e("settings.updatePassword","Update Password")})]})]})]})}export{F as default};
