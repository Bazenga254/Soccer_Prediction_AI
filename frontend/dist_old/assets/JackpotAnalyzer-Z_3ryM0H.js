import{r as t,u as U,f as J,c as F,j as a,L as M,b as X,C as Q}from"./index-B3SC9TNl.js";function R(e){return new Date(e).toLocaleDateString("en-GB",{weekday:"short",month:"short",day:"numeric"})}function O(e){return new Date(e).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}function V(e){const i={};return e.forEach(l=>{const h=l.date.split("T")[0];i[h]||(i[h]=[]),i[h].push(l)}),i}function H({resetAt:e,onExpire:i}){const[l,h]=t.useState("");return t.useEffect(()=>{const x=()=>{const p=new Date,m=new Date(e+(e.endsWith("Z")?"":"Z"))-p;if(m<=0){h("0h 0m 0s"),i?.();return}const g=Math.floor(m/36e5),n=Math.floor(m%36e5/6e4),r=Math.floor(m%6e4/1e3);h(`${g}h ${n}m ${r}s`)};x();const j=setInterval(x,1e3);return()=>clearInterval(j)},[e,i]),a.jsx("strong",{className:"analysis-countdown",children:l})}function Z({matchResult:e}){const[i,l]=t.useState([]),[h,x]=t.useState(""),[j,p]=t.useState(!1),[s,m]=t.useState(!1),[g,n]=t.useState(!1),r=t.useRef(null);t.useEffect(()=>{r.current&&r.current.scrollIntoView({behavior:"smooth"})},[i]);const N=async()=>{if(!h.trim()||j)return;const d=h.trim();x(""),l(u=>[...u,{role:"user",content:d}]),p(!0);try{const u=await F.post("/api/jackpot/chat",{message:d,match_context:e,chat_history:i});l(v=>[...v,{role:"ai",content:u.data.response,sources:u.data.sources||[]}])}catch(u){u.response?.status===403?(n(!0),l(v=>[...v,{role:"ai",content:u.response.data.detail||"You've reached your free AI chat limit. Upgrade to Pro for unlimited access.",sources:[]}])):l(v=>[...v,{role:"ai",content:"Sorry, something went wrong. Please try again.",sources:[]}])}p(!1)},w=d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),N())},S=e.home_team?.name||"Home",_=e.away_team?.name||"Away";return a.jsxs("div",{className:"jackpot-chat-section",children:[a.jsxs("button",{className:`jackpot-chat-toggle ${s?"open":""}`,onClick:()=>m(!s),children:[a.jsxs("span",{children:["ðŸ¤–"," Ask AI about ",S," vs ",_]}),a.jsx("span",{className:"jackpot-chat-toggle-arrow",children:s?"â–²":"â–¼"})]}),s&&a.jsxs("div",{className:"jackpot-chat-box",children:[a.jsxs("div",{className:"jackpot-chat-messages",children:[i.length===0&&a.jsxs("div",{className:"jackpot-chat-welcome",children:[a.jsxs("p",{children:["ðŸ¤–"," Ask me anything about this match!"]}),a.jsx("div",{className:"jackpot-chat-suggestions",children:[`Who are the key players for ${S}?`,"What's the tactical matchup?","How will injuries affect this match?","What's the most likely scoreline?"].map((d,u)=>a.jsx("button",{className:"jackpot-chat-suggestion",onClick:()=>{x(d)},children:d},u))})]}),i.map((d,u)=>a.jsxs("div",{className:`jackpot-chat-msg ${d.role}`,children:[a.jsx("span",{className:"jackpot-chat-role",children:d.role==="user"?"You":"AI Analyst"}),a.jsx("p",{children:d.content}),d.sources&&d.sources.length>0&&a.jsxs("div",{className:"jackpot-chat-sources",children:[a.jsxs("span",{className:"jackpot-chat-sources-label",children:["ðŸ”—"," Sources:"]}),d.sources.map((v,L)=>a.jsx("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"jackpot-chat-source-link",children:v.title},L))]})]},u)),j&&a.jsxs("div",{className:"jackpot-chat-msg ai",children:[a.jsx("span",{className:"jackpot-chat-role",children:"AI Analyst"}),a.jsx("p",{className:"jackpot-chat-typing",children:"Thinking..."})]}),a.jsx("div",{ref:r})]}),g?a.jsxs("div",{className:"jackpot-chat-locked-bar",children:[a.jsxs("span",{children:["ðŸ”’"," Free AI prompts used up."]}),a.jsxs(M,{to:"/upgrade",className:"jackpot-chat-upgrade-link",children:["ðŸš€"," Upgrade to Pro"]})]}):a.jsxs("div",{className:"jackpot-chat-input-row",children:[a.jsx("input",{type:"text",value:h,onChange:d=>x(d.target.value),onKeyDown:w,placeholder:"Ask about this match...",disabled:j}),a.jsx("button",{className:"jackpot-chat-send-btn",onClick:N,disabled:j||!h.trim(),children:a.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]})}function q({selectedMatches:e,onAddMatch:i,onRemoveMatch:l,onStartAnalysis:h,maxMatches:x,tier:j}){const[p,s]=t.useState("PL"),[m,g]=t.useState([]),[n,r]=t.useState(!1),[N,w]=t.useState(""),[S,_]=t.useState([]),[d,u]=t.useState(null),[v,L]=t.useState(!1),C=t.useRef(null),I=X(),{t:D}=U();t.useEffect(()=>{r(!0),F.get(`/api/fixtures?days=14&competition=${p}`).then(c=>{g(c.data.fixtures||[]),r(!1)}).catch(()=>{g([]),r(!1)})},[p]),t.useEffect(()=>{if(N.trim().length<2){_([]);return}(async()=>{let o=d;if(!o){L(!0);try{o=(await F.get("/api/fixtures/upcoming-all?days=7")).data.fixtures||[],u(o)}catch{o=[]}L(!1)}const f=N.toLowerCase(),y=o.filter(E=>(E.home_team?.name||"").toLowerCase().includes(f)||(E.away_team?.name||"").toLowerCase().includes(f)).slice(0,10);_(y)})()},[N,d]),t.useEffect(()=>{const c=o=>{C.current&&!C.current.contains(o.target)&&_([])};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const A=c=>e.some(o=>o.fixture_id===c),P=c=>{A(c.id)?l(c.id):i({fixture_id:c.id,home_team_id:c.home_team.id,away_team_id:c.away_team.id,home_team_name:c.home_team.name,away_team_name:c.away_team.name,home_team_crest:c.home_team.crest,away_team_crest:c.away_team.crest,competition:c.competition?.code||p,match_date:c.date})},T=c=>{P(c),w(""),_([])},b=V(m),z=Object.keys(b).sort();return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"jackpot-header",children:[a.jsx("div",{className:"jackpot-header-icon",children:"ðŸŽ¯"}),a.jsx("h2",{children:D("jackpot.title")}),a.jsx("p",{children:"Select matches from different leagues for AI-powered multi-match analysis"}),a.jsx("div",{className:"jackpot-tier-notice",children:j==="free"?a.jsxs(a.Fragment,{children:[a.jsxs("span",{children:["ðŸ”’"," Free tier: ",x," matches per session"]}),a.jsx("button",{className:"jackpot-upgrade-link",onClick:()=>I("/upgrade"),children:"Upgrade to Pro for 3 sessions/day"})]}):a.jsxs("span",{children:["â­"," ",x," matches per session â€¢ 3 sessions per day"]})})]}),a.jsxs("div",{className:"jackpot-search-wrapper",ref:C,children:[a.jsxs("div",{className:"jackpot-search-bar",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search any team across all leagues...",value:N,onChange:c=>w(c.target.value),className:"jackpot-search-input"}),N&&a.jsx("button",{className:"jackpot-search-clear",onClick:()=>{w(""),_([])},children:"Ã—"})]}),v&&N.trim().length>=2&&a.jsx("div",{className:"jackpot-search-dropdown",children:a.jsx("div",{className:"jackpot-search-loading",children:"Searching..."})}),!v&&S.length>0&&a.jsx("div",{className:"jackpot-search-dropdown",children:S.map(c=>{const o=A(c.id),f=e.length>=x&&!o;return a.jsxs("div",{className:`jackpot-search-result ${o?"selected":""} ${f?"disabled":""}`,onClick:()=>!f&&T(c),children:[a.jsxs("div",{className:"jackpot-search-result-teams",children:[c.home_team.crest&&a.jsx("img",{src:c.home_team.crest,alt:"",className:"jackpot-search-crest"}),a.jsx("span",{children:c.home_team.name}),a.jsx("span",{className:"jackpot-search-vs",children:"vs"}),a.jsx("span",{children:c.away_team.name}),c.away_team.crest&&a.jsx("img",{src:c.away_team.crest,alt:"",className:"jackpot-search-crest"})]}),a.jsxs("div",{className:"jackpot-search-result-meta",children:[a.jsxs("span",{className:"jackpot-search-time",children:[R(c.date)," ",O(c.date)]}),c.competition?.name&&a.jsx("span",{className:"jackpot-search-league",children:c.competition.name})]}),a.jsx("span",{className:`jackpot-search-add ${o?"added":""} ${f?"disabled":""}`,children:o?"âœ“":f?"Full":"+"})]},c.id)})}),!v&&N.trim().length>=2&&S.length===0&&d&&a.jsx("div",{className:"jackpot-search-dropdown",children:a.jsxs("div",{className:"jackpot-search-empty",children:['No matches found for "',N,'"']})})]}),a.jsx("div",{className:"jackpot-league-tabs",children:Q.map(c=>a.jsxs("button",{className:`jackpot-league-chip ${p===c.id?"active":""}`,onClick:()=>s(c.id),children:[a.jsx("span",{className:"chip-flag",children:c.flag}),a.jsx("span",{className:"chip-name",children:c.shortName})]},c.id))}),n?a.jsxs("div",{className:"jackpot-loading-fixtures",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Loading fixtures..."})]}):m.length===0?a.jsx("div",{className:"jackpot-no-fixtures",children:a.jsx("p",{children:"No upcoming fixtures for this league in the next 14 days."})}):a.jsx("div",{className:"jackpot-fixtures-list",children:z.map(c=>a.jsxs("div",{className:"jackpot-date-group",children:[a.jsxs("div",{className:"jackpot-date-header",children:[a.jsx("span",{children:R(c+"T00:00:00")}),a.jsxs("span",{className:"jackpot-date-count",children:[b[c].length," matches"]})]}),a.jsx("div",{className:"jackpot-fixtures-grid",children:b[c].map(o=>{const f=A(o.id),y=e.length>=x&&!f;return a.jsxs("div",{className:`jackpot-fixture-card ${f?"selected":""} ${y?"disabled":""}`,onClick:()=>!y&&P(o),children:[a.jsx("div",{className:"jackpot-fixture-time",children:O(o.date)}),a.jsxs("div",{className:"jackpot-fixture-teams",children:[a.jsxs("div",{className:"jackpot-fixture-team",children:[o.home_team.crest&&a.jsx("img",{src:o.home_team.crest,alt:"",className:"jackpot-crest"}),a.jsx("span",{children:o.home_team.name})]}),a.jsx("span",{className:"jackpot-vs",children:"vs"}),a.jsxs("div",{className:"jackpot-fixture-team",children:[a.jsx("span",{children:o.away_team.name}),o.away_team.crest&&a.jsx("img",{src:o.away_team.crest,alt:"",className:"jackpot-crest"})]})]}),a.jsx("div",{className:`jackpot-add-btn ${f?"added":""} ${y?"disabled":""}`,children:f?"âœ“ Added":y?"Limit reached":"+ Add"})]},o.id)})})]},c))}),e.length>=2&&a.jsxs("div",{className:"jackpot-floating-bar",children:[a.jsxs("div",{className:"jackpot-floating-info",children:[a.jsxs("span",{className:"jackpot-floating-count",children:[e.length,"/",x]}),a.jsx("span",{className:"jackpot-floating-label",children:"matches selected"})]}),a.jsxs("button",{className:"jackpot-floating-analyze-btn",onClick:h,children:["ðŸ”®"," Analyze ",e.length," Matches"]})]}),e.length>0&&a.jsxs("div",{className:"jackpot-selected-panel",children:[a.jsxs("div",{className:"jackpot-selected-header",children:[a.jsxs("span",{className:"jackpot-selected-title",children:["ðŸŽ¯"," Selected Matches"]}),a.jsxs("span",{className:"jackpot-selected-count",children:[e.length,"/",x]})]}),a.jsx("div",{className:"jackpot-selected-list",children:e.map(c=>a.jsxs("div",{className:"jackpot-selected-item",children:[a.jsxs("span",{className:"jackpot-selected-match",children:[c.home_team_name," vs ",c.away_team_name]}),a.jsx("button",{className:"jackpot-remove-btn",onClick:()=>l(c.fixture_id),children:"âœ•"})]},c.fixture_id))}),a.jsxs("button",{className:"jackpot-analyze-btn",onClick:h,disabled:e.length<2,children:["ðŸ”®"," ",D("jackpot.analyze")," ",e.length," Match",e.length!==1?"es":""]}),e.length<2&&a.jsx("p",{className:"jackpot-min-hint",children:"Select at least 2 matches to analyze"})]})]})}function aa({totalMatches:e}){const{t:i}=U();return a.jsxs("div",{className:"jackpot-analyzing",children:[a.jsx("div",{className:"jackpot-analyzing-spinner"}),a.jsx("h3",{children:i("jackpot.analyzing")}),a.jsxs("p",{children:["Our AI is analyzing ",e," matches..."]}),a.jsx("p",{className:"jackpot-analyzing-sub",children:"Checking H2H records, team form, injuries, coaching data, goals patterns, and more"})]})}function B({combo:e,accentColor:i}){return e?a.jsxs("div",{className:"jackpot-combination-card",style:{borderColor:i},children:[a.jsx("div",{className:"jackpot-combo-header",style:{background:i},children:a.jsx("span",{className:"jackpot-combo-name",children:e.name})}),a.jsx("p",{className:"jackpot-combo-desc",children:e.description}),a.jsx("div",{className:"jackpot-combo-picks",children:e.picks.map((l,h)=>a.jsxs("div",{className:"jackpot-combo-pick",children:[a.jsx("span",{className:"jackpot-combo-match",children:l.match}),a.jsxs("span",{className:"jackpot-combo-pick-value",children:[a.jsxs("span",{className:"jackpot-combo-market",children:[l.market,":"]})," ",l.pick,a.jsxs("span",{className:"jackpot-combo-prob",children:[l.probability.toFixed(1),"%"]})]})]},h))}),a.jsxs("div",{className:"jackpot-combo-total",children:["Combined Probability: ",a.jsxs("strong",{children:[e.combined_probability.toFixed(4),"%"]})]})]}):null}function sa({result:e,index:i}){const[l,h]=t.useState(!1);if(e.status==="failed")return a.jsx("div",{className:"jackpot-match-card failed",children:a.jsxs("div",{className:"jackpot-match-header",children:[a.jsxs("span",{className:"jackpot-match-num",children:["#",i+1]}),a.jsxs("span",{className:"jackpot-match-teams-label",children:[e.home_team.name," vs ",e.away_team.name]}),a.jsx("span",{className:"jackpot-match-status-badge failed",children:"Failed"})]})});const x=e.predictions||{},j=x["1x2"]||{},p=x.double_chance||{},s=e.factors||{},m=e.goals_analysis,g=e.scoring_by_half;return a.jsxs("div",{className:"jackpot-match-card",children:[a.jsxs("div",{className:"jackpot-match-header",onClick:()=>h(!l),children:[a.jsxs("span",{className:"jackpot-match-num",children:["#",i+1]}),a.jsx("div",{className:"jackpot-match-teams-info",children:a.jsxs("div",{className:"jackpot-match-teams-label",children:[e.home_team.crest&&a.jsx("img",{src:e.home_team.crest,alt:"",className:"jackpot-mini-crest"}),a.jsx("span",{children:e.home_team.name}),a.jsx("span",{className:"jackpot-match-vs",children:"vs"}),a.jsx("span",{children:e.away_team.name}),e.away_team.crest&&a.jsx("img",{src:e.away_team.crest,alt:"",className:"jackpot-mini-crest"})]})}),a.jsxs("div",{className:"jackpot-match-rec",children:[a.jsx("span",{className:"jackpot-rec-badge",children:j.recommended_label||"?"}),a.jsx("span",{className:`jackpot-confidence ${(j.confidence||"").toLowerCase()}`,children:j.confidence})]}),a.jsx("span",{className:"jackpot-expand-icon",children:l?"â–²":"â–¼"})]}),l&&a.jsxs("div",{className:"jackpot-match-details",children:[a.jsxs("div",{className:"jackpot-section",children:[a.jsx("h4",{children:"Match Result (1X2)"}),a.jsxs("div",{className:"jackpot-1x2-bars",children:[a.jsxs("div",{className:"jackpot-bar-row",children:[a.jsx("span",{className:"jackpot-bar-label",children:e.home_team.name}),a.jsx("div",{className:"jackpot-bar-track",children:a.jsxs("div",{className:"jackpot-bar-fill home",style:{width:`${j.home_win}%`},children:[j.home_win?.toFixed(1),"%"]})})]}),a.jsxs("div",{className:"jackpot-bar-row",children:[a.jsx("span",{className:"jackpot-bar-label",children:"Draw"}),a.jsx("div",{className:"jackpot-bar-track",children:a.jsxs("div",{className:"jackpot-bar-fill draw",style:{width:`${j.draw}%`},children:[j.draw?.toFixed(1),"%"]})})]}),a.jsxs("div",{className:"jackpot-bar-row",children:[a.jsx("span",{className:"jackpot-bar-label",children:e.away_team.name}),a.jsx("div",{className:"jackpot-bar-track",children:a.jsxs("div",{className:"jackpot-bar-fill away",style:{width:`${j.away_win}%`},children:[j.away_win?.toFixed(1),"%"]})})]})]})]}),a.jsxs("div",{className:"jackpot-section",children:[a.jsx("h4",{children:"Double Chance"}),a.jsx("div",{className:"jackpot-dc-grid",children:["1X","X2","12"].map(n=>a.jsxs("div",{className:`jackpot-dc-card ${p.recommended===n?"recommended":""}`,children:[a.jsx("span",{className:"jackpot-dc-label",children:n}),a.jsxs("span",{className:"jackpot-dc-prob",children:[p[n]?.toFixed(1),"%"]}),p.recommended===n&&a.jsx("span",{className:"jackpot-dc-rec-tag",children:"Best"})]},n))})]}),m&&a.jsxs("div",{className:"jackpot-section",children:[a.jsxs("h4",{children:["âš½"," Goals Analysis"]}),a.jsxs("div",{className:"jackpot-goals-grid",children:[a.jsxs("div",{className:"jackpot-goals-stat",children:[a.jsx("span",{className:"jackpot-goals-num",children:m.avg_total_goals}),a.jsx("span",{className:"jackpot-goals-lbl",children:"Avg Goals/Game"})]}),a.jsxs("div",{className:"jackpot-goals-stat",children:[a.jsx("span",{className:"jackpot-goals-num",children:m.avg_home_goals}),a.jsxs("span",{className:"jackpot-goals-lbl",children:[e.home_team.name," Avg"]})]}),a.jsxs("div",{className:"jackpot-goals-stat",children:[a.jsx("span",{className:"jackpot-goals-num",children:m.avg_away_goals}),a.jsxs("span",{className:"jackpot-goals-lbl",children:[e.away_team.name," Avg"]})]})]}),m.scoring_prediction&&a.jsxs("div",{className:"jackpot-predicted-score",children:[a.jsx("span",{className:"jackpot-predicted-label",children:"Predicted Score:"}),a.jsx("span",{className:"jackpot-predicted-value",children:m.scoring_prediction.predicted_score})]}),a.jsx("div",{className:"jackpot-ou-grid",children:Object.entries(m.over_under||{}).map(([n,r])=>a.jsxs("div",{className:`jackpot-ou-item ${r.prediction==="Yes"?"likely":""}`,children:[a.jsx("span",{className:"jackpot-ou-label",children:n.replace("_"," ").replace("over ","O")}),a.jsxs("span",{className:"jackpot-ou-pct",children:[r.percentage,"%"]}),a.jsx("span",{className:`jackpot-ou-pred ${r.prediction==="Yes"?"yes":"no"}`,children:r.prediction})]},n))}),m.btts&&a.jsxs("div",{className:"jackpot-btts",children:[a.jsx("span",{className:"jackpot-btts-label",children:"Both Teams To Score:"}),a.jsxs("span",{className:`jackpot-btts-value ${m.btts.prediction==="Yes"?"yes":"no"}`,children:[m.btts.prediction," (",m.btts.yes_percentage,"%)"]})]})]}),g&&a.jsxs("div",{className:"jackpot-section",children:[a.jsxs("h4",{children:["ðŸ•‘"," Scoring By Half"]}),a.jsxs("div",{className:"jackpot-halves-grid",children:[a.jsxs("div",{className:"jackpot-half-card",children:[a.jsx("span",{className:"jackpot-half-title",children:"1st Half"}),a.jsxs("span",{className:"jackpot-half-goals",children:["~",g.first_half.avg_goals," goals"]}),a.jsxs("div",{className:"jackpot-half-detail",children:[a.jsxs("span",{children:["Over 0.5: ",g.first_half.over_05,"%"]}),a.jsxs("span",{children:["Over 1.5: ",g.first_half.over_15,"%"]})]})]}),a.jsxs("div",{className:"jackpot-half-card",children:[a.jsx("span",{className:"jackpot-half-title",children:"2nd Half"}),a.jsxs("span",{className:"jackpot-half-goals",children:["~",g.second_half.avg_goals," goals"]}),a.jsxs("div",{className:"jackpot-half-detail",children:[a.jsxs("span",{children:["Over 0.5: ",g.second_half.over_05,"%"]}),a.jsxs("span",{children:["Over 1.5: ",g.second_half.over_15,"%"]})]})]})]})]}),s.h2h&&s.h2h.total_matches>0&&a.jsxs("div",{className:"jackpot-section",children:[a.jsxs("h4",{children:["Head to Head (",s.h2h.total_matches," matches)"]}),a.jsxs("div",{className:"jackpot-h2h-stats",children:[a.jsxs("div",{className:"jackpot-h2h-stat",children:[a.jsx("span",{className:"jackpot-h2h-num",children:s.h2h.home_wins}),a.jsxs("span",{className:"jackpot-h2h-lbl",children:[e.home_team.name," wins"]})]}),a.jsxs("div",{className:"jackpot-h2h-stat",children:[a.jsx("span",{className:"jackpot-h2h-num",children:s.h2h.draws}),a.jsx("span",{className:"jackpot-h2h-lbl",children:"Draws"})]}),a.jsxs("div",{className:"jackpot-h2h-stat",children:[a.jsx("span",{className:"jackpot-h2h-num",children:s.h2h.away_wins}),a.jsxs("span",{className:"jackpot-h2h-lbl",children:[e.away_team.name," wins"]})]})]}),s.h2h.home_goals!=null&&a.jsxs("div",{className:"jackpot-h2h-goals",children:[a.jsxs("span",{children:[e.home_team.name,": ",s.h2h.home_goals," goals"]}),a.jsxs("span",{children:[e.away_team.name,": ",s.h2h.away_goals," goals"]})]})]}),(s.form?.home_form||s.form?.away_form)&&a.jsxs("div",{className:"jackpot-section",children:[a.jsx("h4",{children:"Current Form"}),a.jsxs("div",{className:"jackpot-form-row",children:[a.jsxs("span",{className:"jackpot-form-team",children:[e.home_team.name,":"]}),a.jsx("div",{className:"jackpot-form-badges",children:(s.form.home_form||"").split("").map((n,r)=>a.jsx("span",{className:`jackpot-form-badge ${n==="W"?"win":n==="D"?"draw":"loss"}`,children:n},r))}),a.jsxs("span",{className:"jackpot-form-score",children:[s.form.home_form_score?.toFixed(0),"%"]})]}),a.jsxs("div",{className:"jackpot-form-row",children:[a.jsxs("span",{className:"jackpot-form-team",children:[e.away_team.name,":"]}),a.jsx("div",{className:"jackpot-form-badges",children:(s.form.away_form||"").split("").map((n,r)=>a.jsx("span",{className:`jackpot-form-badge ${n==="W"?"win":n==="D"?"draw":"loss"}`,children:n},r))}),a.jsxs("span",{className:"jackpot-form-score",children:[s.form.away_form_score?.toFixed(0),"%"]})]})]}),s.standings&&a.jsxs("div",{className:"jackpot-section",children:[a.jsxs("h4",{children:["ðŸ†"," League Standings"]}),a.jsxs("div",{className:"jackpot-standings-grid",children:[a.jsxs("div",{className:"jackpot-standings-team",children:[a.jsxs("span",{className:"jackpot-standings-pos",children:["#",s.standings.home_position||"?"]}),a.jsx("span",{className:"jackpot-standings-name",children:e.home_team.name}),a.jsx("span",{className:"jackpot-standings-record",children:s.standings.home_record}),a.jsxs("span",{className:"jackpot-standings-pts",children:[s.standings.home_points," pts (GD: ",s.standings.home_gd>0?"+":"",s.standings.home_gd,")"]})]}),a.jsxs("div",{className:"jackpot-standings-team",children:[a.jsxs("span",{className:"jackpot-standings-pos",children:["#",s.standings.away_position||"?"]}),a.jsx("span",{className:"jackpot-standings-name",children:e.away_team.name}),a.jsx("span",{className:"jackpot-standings-record",children:s.standings.away_record}),a.jsxs("span",{className:"jackpot-standings-pts",children:[s.standings.away_points," pts (GD: ",s.standings.away_gd>0?"+":"",s.standings.away_gd,")"]})]})]})]}),s.motivation&&s.motivation.home&&a.jsxs("div",{className:"jackpot-section",children:[a.jsxs("h4",{children:["ðŸ”¥"," Team Motivation"]}),a.jsxs("div",{className:"jackpot-motivation-grid",children:[a.jsxs("div",{className:"jackpot-motivation-item",children:[a.jsx("span",{className:"jackpot-motivation-team",children:e.home_team.name}),a.jsx("span",{className:`jackpot-motivation-level ${s.motivation.home.level?.toLowerCase()}`,children:s.motivation.home.level}),a.jsx("span",{className:"jackpot-motivation-note",children:s.motivation.home.note})]}),a.jsxs("div",{className:"jackpot-motivation-item",children:[a.jsx("span",{className:"jackpot-motivation-team",children:e.away_team.name}),a.jsx("span",{className:`jackpot-motivation-level ${s.motivation.away.level?.toLowerCase()}`,children:s.motivation.away.level}),a.jsx("span",{className:"jackpot-motivation-note",children:s.motivation.away.note})]})]})]}),(s.injuries?.home?.length>0||s.injuries?.away?.length>0)&&a.jsxs("div",{className:"jackpot-section",children:[a.jsxs("h4",{children:["ðŸ¥"," Injuries & Suspensions"]}),s.injury_impact&&a.jsx("div",{className:`jackpot-injury-verdict ${s.injury_impact.advantage}`,children:s.injury_impact.verdict}),s.injuries.home?.length>0&&a.jsxs("div",{className:"jackpot-injury-group",children:[a.jsxs("span",{className:"jackpot-injury-team",children:[e.home_team.name," (",s.injuries.home.length,"):"]}),s.injuries.home.map((n,r)=>a.jsxs("span",{className:"jackpot-injury-item",children:[n.player," (",n.reason||n.type,")"]},r))]}),s.injuries.away?.length>0&&a.jsxs("div",{className:"jackpot-injury-group",children:[a.jsxs("span",{className:"jackpot-injury-team",children:[e.away_team.name," (",s.injuries.away.length,"):"]}),s.injuries.away.map((n,r)=>a.jsxs("span",{className:"jackpot-injury-item",children:[n.player," (",n.reason||n.type,")"]},r))]})]}),(s.coaches?.home||s.coaches?.away)&&a.jsxs("div",{className:"jackpot-section",children:[a.jsxs("h4",{children:["ðŸ§‘â€ðŸ«"," Coaches"]}),a.jsxs("div",{className:"jackpot-coaches",children:[s.coaches.home&&a.jsxs("div",{className:"jackpot-coach",children:[s.coaches.home.photo&&a.jsx("img",{src:s.coaches.home.photo,alt:"",className:"jackpot-coach-photo"}),a.jsxs("div",{children:[a.jsx("strong",{children:s.coaches.home.name}),a.jsx("span",{className:"jackpot-coach-team",children:e.home_team.name})]})]}),s.coaches.away&&a.jsxs("div",{className:"jackpot-coach",children:[s.coaches.away.photo&&a.jsx("img",{src:s.coaches.away.photo,alt:"",className:"jackpot-coach-photo"}),a.jsxs("div",{children:[a.jsx("strong",{children:s.coaches.away.name}),a.jsx("span",{className:"jackpot-coach-team",children:e.away_team.name})]})]})]})]}),s.ai_insights&&(s.ai_insights.motivation||s.ai_insights.player_strength||s.ai_insights.new_signings||s.ai_insights.coaching_impact)&&a.jsxs("div",{className:"jackpot-section jackpot-ai-section",children:[a.jsxs("h4",{children:["ðŸ¤–"," AI Insights"]}),s.ai_insights.motivation&&a.jsxs("div",{className:"jackpot-ai-item",children:[a.jsx("span",{className:"jackpot-ai-label",children:"Motivation:"}),a.jsx("span",{children:s.ai_insights.motivation})]}),s.ai_insights.player_strength&&a.jsxs("div",{className:"jackpot-ai-item",children:[a.jsx("span",{className:"jackpot-ai-label",children:"Key Players:"}),a.jsx("span",{children:s.ai_insights.player_strength})]}),s.ai_insights.new_signings&&a.jsxs("div",{className:"jackpot-ai-item",children:[a.jsx("span",{className:"jackpot-ai-label",children:"Transfers:"}),a.jsx("span",{children:s.ai_insights.new_signings})]}),s.ai_insights.coaching_impact&&a.jsxs("div",{className:"jackpot-ai-item",children:[a.jsx("span",{className:"jackpot-ai-label",children:"Coaching:"}),a.jsx("span",{children:s.ai_insights.coaching_impact})]})]}),e.key_factors?.length>0&&a.jsxs("div",{className:"jackpot-section",children:[a.jsx("h4",{children:"Key Factors"}),a.jsx("ul",{className:"jackpot-key-factors",children:e.key_factors.map((n,r)=>a.jsx("li",{children:n},r))})]}),a.jsxs("div",{className:"jackpot-data-source",children:["Data: ",a.jsx("span",{className:`source-badge ${e.data_source}`,children:e.data_source?.toUpperCase()})]}),a.jsx(Z,{matchResult:e})]})]})}function ea({results:e,combinations:i,onReset:l}){const h=e.filter(p=>p.status==="completed").length,x=e.filter(p=>p.status==="failed").length,{t:j}=U();return a.jsxs("div",{className:"jackpot-results",children:[a.jsxs("div",{className:"jackpot-results-header",children:[a.jsxs("h2",{children:["ðŸŽ¯"," ",j("jackpot.results")]}),a.jsxs("p",{children:[h," match",h!==1?"es":""," analyzed",x>0?`, ${x} failed`:""]}),a.jsxs("button",{className:"jackpot-new-btn",onClick:l,children:["ðŸ”„"," New Jackpot"]})]}),i&&a.jsxs("div",{className:"jackpot-combinations",children:[a.jsx("h3",{children:"Recommended Combinations"}),a.jsxs("div",{className:"jackpot-combinations-grid",children:[a.jsx(B,{combo:i.safest,accentColor:"#22c55e"}),a.jsx(B,{combo:i.balanced,accentColor:"#3b82f6"}),a.jsx(B,{combo:i.high_value,accentColor:"#f59e0b"})]})]}),a.jsxs("div",{className:"jackpot-match-results",children:[a.jsx("h3",{children:"Match-by-Match Analysis"}),e.map((p,s)=>a.jsx(sa,{result:p,index:s},p.fixture_id||s))]})]})}function ta(){const[e,i]=t.useState("select"),[l,h]=t.useState([]),[x,j]=t.useState([]),[p,s]=t.useState(null),[m,g]=t.useState(null),[n,r]=t.useState(5),[N,w]=t.useState("free"),[S,_]=t.useState(0),[d,u]=t.useState(2),[v,L]=t.useState(!1),[C,I]=t.useState(0),[D,A]=t.useState(!1),[P,T]=t.useState(!1),[b,z]=t.useState(null),[c,o]=t.useState(!1),{t:f}=U(),{isKenyan:y}=J();t.useEffect(()=>{F.get("/api/jackpot/limits").then(k=>{r(k.data.max_matches||5),w(k.data.tier||"free"),_(k.data.sessions_used||0),u(k.data.max_sessions??2),I(k.data.balance_usd||0),z(k.data.locked_until||null),o(k.data.locked||!1),L(!0)}).catch(()=>{r(5),w("free"),L(!0)})},[]);const E=k=>{l.length>=n||l.some($=>$.fixture_id===k.fixture_id)||h($=>[...$,k])},K=k=>{h($=>$.filter(G=>G.fixture_id!==k))},Y=async()=>{i("analyzing"),g(null);try{const k=await F.post("/api/jackpot/analyze",{matches:l,balance_paid:P});j(k.data.results||[]),s(k.data.combinations||null),i("results")}catch(k){const $=k.response?.data?.detail||"Analysis failed. Please try again.";g($),i("select")}},W=()=>{i("select"),h([]),j([]),s(null),g(null)};return a.jsxs("div",{className:"jackpot-page",children:[m&&a.jsxs("div",{className:"jackpot-error",children:[a.jsx("span",{children:m}),a.jsx("button",{onClick:()=>g(null),children:"âœ•"})]}),e==="select"&&c&&a.jsxs("div",{className:"jackpot-locked-overlay",children:[a.jsx("div",{className:"jackpot-locked-icon",children:"ðŸ”’"}),a.jsx("h2",{className:"jackpot-locked-title",children:N==="free"?"Free Analyses Used Up":"Daily Sessions Used Up"}),a.jsx("p",{className:"jackpot-locked-text",children:N==="free"?a.jsxs(a.Fragment,{children:["You've used your ",S>=2&&d===2?"2 free":"free"," jackpot analyses.",b&&a.jsxs(a.Fragment,{children:[" ","Your next free analysis unlocks in"," ",a.jsx(H,{resetAt:b,onExpire:()=>{o(!1),window.location.reload()}}),"."]}),!b&&" After the first 2, you get 1 free analysis every 72 hours."]}):a.jsxs(a.Fragment,{children:["You've used all ",d," sessions for today (",d*5," matches total).",b&&a.jsxs(a.Fragment,{children:[" ","Your next session unlocks in"," ",a.jsx(H,{resetAt:b,onExpire:()=>{o(!1),window.location.reload()}}),"."]})]})}),N==="free"&&C>=1&&a.jsx("button",{className:"balance-pay-btn",disabled:D,onClick:async()=>{A(!0);try{const k=await F.post("/api/balance/use-for-jackpot");k.data.success&&(I(k.data.balance?.balance_usd||0),T(!0),o(!1))}catch{}A(!1)},children:D?"Processing...":`Use Balance (${y?"KES 130":"$1.00"}) â€” ${y?`KES ${Math.round(C*130)}`:`$${C.toFixed(2)}`} available`}),N==="free"&&a.jsxs(M,{to:"/upgrade",className:"jackpot-locked-upgrade-btn",children:["ðŸš€"," ",C<1?y?"Deposit KES 100 to Unlock":"Deposit $1 to Unlock":"Upgrade to Pro for More Sessions"]}),a.jsxs(M,{to:"/my-analysis",className:"jackpot-locked-history-link",children:["ðŸ“Š"," View your past analyses"]})]}),e==="select"&&!c&&a.jsx(q,{selectedMatches:l,onAddMatch:E,onRemoveMatch:K,onStartAnalysis:Y,maxMatches:n,tier:N}),e==="analyzing"&&a.jsx(aa,{totalMatches:l.length}),e==="results"&&a.jsx(ea,{results:x,combinations:p,onReset:W})]})}export{ta as default};
