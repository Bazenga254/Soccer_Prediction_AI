import{g as O,r,u as E,j as s}from"./index-B3SC9TNl.js";function M(){const{selectedBets:y,removeBet:g,updateOdds:C,clearAllBets:P,combinedProbability:t,combinedOdds:N,riskScore:h,betCount:l,confirmPredictions:k,confirming:u,confirmResult:c,setConfirmResult:S}=O(),[p,w]=r.useState(!0),[$,b]=r.useState(!1),[i,x]=r.useState("private"),[a,o]=r.useState(!1),[d,v]=r.useState("2.00"),[m,f]=r.useState(""),{t:F}=E(),n=m.trim()?m.trim().split(/\s+/).length:0,A=async()=>{(await k({visibility:i,isPaid:i==="public"&&a,priceUsd:i==="public"&&a&&parseFloat(d)||0,analysisNotes:m}))?.success&&(b(!1),x("private"),o(!1),v("2.00"),f(""))};return c?.success&&l===0?s.jsxs("div",{className:"bet-slip-container",children:[s.jsx("div",{className:"bet-slip-header",children:s.jsxs("div",{className:"bet-slip-title",children:[s.jsx("span",{className:"bet-slip-icon",children:"âœ“"}),s.jsx("span",{children:"My Predictions"})]})}),s.jsx("div",{className:"bet-slip-content",children:s.jsxs("div",{className:"confirm-success",children:[s.jsx("div",{className:"confirm-success-icon",children:"âœ“"}),s.jsxs("p",{children:[c.count," prediction",c.count!==1?"s":""," confirmed!"]}),c.shared&&s.jsxs("p",{className:"confirm-success-sub",children:[c.isPaid?"Listed for sale":"Shared publicly"," in Community"]}),!c.shared&&s.jsx("p",{className:"confirm-success-sub",children:"Saved to your prediction history"}),s.jsx("button",{className:"confirm-dismiss-btn",onClick:()=>S(null),children:"OK"})]})})]}):l===0?null:s.jsxs("div",{className:"bet-slip-container",children:[s.jsxs("div",{className:"bet-slip-header",onClick:()=>w(!p),children:[s.jsxs("div",{className:"bet-slip-title",children:[s.jsx("span",{className:"bet-slip-icon",children:"ðŸ“‹"}),s.jsx("span",{children:"My Predictions"}),s.jsx("span",{className:"bet-count",children:l})]}),s.jsx("button",{className:"expand-btn",children:p?"â–¼":"â–²"})]}),p&&s.jsx("div",{className:"bet-slip-content",children:$?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"confirm-options-panel",children:[s.jsx("h4",{className:"confirm-panel-title",children:"Confirm Your Predictions"}),s.jsxs("p",{className:"confirm-panel-sub",children:[l," prediction",l!==1?"s":""," selected"]}),s.jsxs("div",{className:"confirm-section",children:[s.jsx("label",{className:"confirm-label",children:"Visibility"}),s.jsxs("div",{className:"visibility-toggle",children:[s.jsx("button",{className:`toggle-btn ${i==="private"?"active":""}`,onClick:()=>{x("private"),o(!1)},children:"Private"}),s.jsx("button",{className:`toggle-btn ${i==="public"?"active":""}`,onClick:()=>x("public"),children:"Public"})]}),s.jsx("p",{className:"confirm-hint",children:i==="private"?"Only you can see these predictions":"Visible to the community"})]}),i==="public"&&s.jsxs("div",{className:"confirm-section",children:[s.jsx("label",{className:"confirm-label",children:"Monetize"}),s.jsxs("div",{className:"monetize-toggle",children:[s.jsx("button",{className:`toggle-btn ${a?"":"active"}`,onClick:()=>o(!1),children:"Free"}),s.jsx("button",{className:`toggle-btn paid-toggle ${a?"active":""}`,onClick:()=>o(!0),children:"Sell"})]})]}),i==="public"&&a&&s.jsxs("div",{className:"confirm-section",children:[s.jsx("label",{className:"confirm-label",children:"Price"}),s.jsxs("div",{className:"price-row",children:[s.jsx("span",{className:"price-currency",children:"$"}),s.jsx("input",{type:"number",className:"price-input",value:d,onChange:e=>v(e.target.value),min:"0.50",max:"50.00",step:"0.50"}),s.jsx("span",{className:"price-currency",children:"USD"})]}),s.jsxs("p",{className:"confirm-hint",children:["You earn 70% ($",(parseFloat(d||0)*.7).toFixed(2),") | Platform fee 30%"]})]}),i==="public"&&s.jsxs("div",{className:"confirm-section",children:[s.jsxs("label",{className:"confirm-label",children:["Analysis Notes ",a&&s.jsx("span",{className:"required-badge",children:"Required"})]}),s.jsx("textarea",{className:"analysis-notes-input",value:m,onChange:e=>f(e.target.value),placeholder:a?"Explain your reasoning (min 30 words)...":"Add your analysis notes (optional)...",maxLength:1e3,rows:4}),s.jsxs("div",{className:`word-count ${a&&n<30?"insufficient":""}`,children:[n," word",n!==1?"s":"",a&&n<30&&` (${30-n} more needed)`]})]}),c?.error&&s.jsx("div",{className:"confirm-error",children:c.error}),s.jsxs("div",{className:"confirm-actions",children:[s.jsx("button",{className:"confirm-submit-btn",onClick:A,disabled:u||i==="public"&&a&&n<30,children:u?"Confirming...":i==="public"?a?`Sell for $${d}`:"Confirm & Share":"Confirm as Private"}),s.jsx("button",{className:"confirm-back-btn",onClick:()=>b(!1),disabled:u,children:"Back"})]})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bet-slip-items",children:y.map((e,B)=>s.jsxs("div",{className:"bet-slip-item",children:[s.jsxs("div",{className:"bet-item-info",children:[s.jsx("div",{className:"bet-match",children:e.matchName}),s.jsxs("div",{className:"bet-selection",children:[s.jsxs("span",{className:"bet-category",children:[e.category,":"]}),s.jsx("span",{className:"bet-outcome",children:e.outcome})]}),s.jsxs("div",{className:"bet-odds-input-row",children:[s.jsx("label",{className:"bet-odds-label",children:"Odds:"}),s.jsx("input",{type:"number",className:"bet-odds-input",placeholder:"e.g. 1.50",value:e.odds??"",onChange:j=>C(e.matchId,j.target.value),min:"1.01",step:"0.01",onClick:j=>j.stopPropagation()})]})]}),s.jsxs("div",{className:"bet-item-right",children:[s.jsxs("span",{className:"bet-probability",children:[e.probability,"%"]}),s.jsx("button",{className:"remove-bet-btn",onClick:()=>g(e.matchId),children:"âœ•"})]})]},`${e.matchId}-${e.category}-${B}`))}),s.jsxs("div",{className:"bet-slip-summary",children:[s.jsxs("div",{className:"summary-row",children:[s.jsx("span",{className:"summary-label",children:"Total Selections"}),s.jsx("span",{className:"summary-value",children:l})]}),s.jsxs("div",{className:"summary-row highlight",children:[s.jsx("span",{className:"summary-label",children:"Combined Probability"}),s.jsxs("span",{className:"summary-value probability",children:[t.toFixed(2),"%"]})]}),s.jsxs("div",{className:"summary-row",children:[s.jsx("span",{className:"summary-label",children:"Risk Score"}),s.jsxs("span",{className:`summary-value risk ${h>10?"high":h>5?"medium":"low"}`,children:[h.toFixed(1),"x"]})]}),N!==null&&s.jsxs("div",{className:"summary-row highlight",children:[s.jsx("span",{className:"summary-label",children:"Total Odds"}),s.jsx("span",{className:"summary-value odds-value",children:N.toFixed(2)})]}),s.jsx("div",{className:"probability-bar",children:s.jsx("div",{className:"probability-fill",style:{width:`${Math.min(t,100)}%`}})}),s.jsx("p",{className:"probability-note",children:t>=50?"Good chance of success":t>=25?"Moderate risk":t>=10?"High risk accumulator":"Very high risk - proceed with caution"})]}),s.jsxs("button",{className:"confirm-predictions-btn",onClick:()=>b(!0),children:["Confirm ",l>1?`All ${l} Predictions`:"Prediction"]}),s.jsx("button",{className:"clear-all-btn",onClick:P,children:F("betSlip.clearAll")})]})})]})}export{M as default};
